(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"9c8c":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{staticClass:"bg-grey-3"},[n("div",{staticClass:"q-pa-md"},[n("q-btn",{staticClass:"q-mb-xs q-mr-xs",attrs:{push:"",color:"white","text-color":"blue",icon:"fas fa-arrow-left",to:"/branches"}}),n("q-table",{attrs:{dense:"",title:"Покупатели",data:e.data,columns:e.columns,"row-key":"index",filter:e.filter,loading:e.loading,separator:"cell",pagination:e.pagination,"rows-per-page-options":[0],"pagination-label":function(t,n,r){return t+"-"+n+" из "+e.rowsNumber}},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"body-cell-actions",fn:function(t){return[n("q-td",{attrs:{props:t}},[n("q-btn",{attrs:{dense:"",round:"",flat:"",color:"grey",icon:"edit"}}),n("q-btn",{attrs:{dense:"",round:"",flat:"",color:"grey",to:{name:"branch-info-detail",params:{business_medicine_id:t.row.business_medicine_id,branch_id:e.id}},icon:"fas fa-info-circle"}})],1)]}},{key:"top",fn:function(t){return[n("span",{staticClass:"text-h6"},[e._v("Лекарства в "+e._s(e.branch_name.name))]),n("q-space"),n("form",{staticClass:"row",on:{submit:function(t){return t.preventDefault(),e.getSearchResultByFilter(t)}}},[n("q-input",{staticStyle:{border:"1px solid silver",padding:"0px 5px","min-width":"20vw"},attrs:{square:"",borderless:"",dense:"",debounce:"500",color:"primary",placeholder:"Искать"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),n("q-btn",{staticClass:"bg-blue",staticStyle:{"border-radius":"0px"},attrs:{flat:"",square:"",color:"white",type:"submit"}},[n("q-icon",{attrs:{name:"search"}})],1)],1),n("q-btn",{staticClass:"q-ml-md",attrs:{flat:"",round:"",dense:"",icon:"fas fa-sync-alt",color:e.rColor,size:"sm"},on:{click:e.refresh}}),n("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",round:"",dense:"",icon:t.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:t.toggleFullscreen}})]}}])})],1)])},a=[],i=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("c47a")),s=n.n(i),c=n("967e"),o=n.n(c),l=(n("96cf"),n("fa84")),u=n.n(l),f=(n("c5f6"),n("2f62"));function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={props:{id:[String,Number],row:{required:!1}},data:function(){return{rColor:"grey",rowsNumber:"",pagination:{rowsPerPage:9,page:1},branch_name:this.row?this.row:"",loading:!1,filter:"",columns:[{name:"index",align:"center",label:"No#",field:"index",sortable:!0},{name:"products",align:"center",label:"Лекарство",field:"title",sortable:!0},{name:"barcode",align:"center",label:"Штрих-код",field:"barcode",sortable:!0},{name:"country",align:"center",label:"Страна",field:"country",sortable:!0},{name:"manufacture",align:"center",label:"Производитель",field:"manufacture",sortable:!0},{name:"serial_code",align:"center",label:"Серийный номер",field:"serial_code",sortable:!0},{name:"total_quantity",align:"center",label:"Кол-во",field:"total_quantity",sortable:!0},{name:"vat",align:"center",label:"НДС",field:"vat",sortable:!0},{name:"sold_quantity",align:"center",label:"Продажи за 30 дней",field:"sold_quantity",sortable:!0},{name:"actions",label:"Действия",field:"",align:"center"}],data:[]}},watch:{"pagination.page":function(){var e=u()(o.a.mark((function e(t,n){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t!=this.pagesNumber){e.next=3;break}return e.next=3,this.GET_NEXT_PAGE_FOR_BRANCH_MEDICINES();case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),filter:function(){var e=u()(o.a.mark((function e(t,n){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.length>=2)){e.next=5;break}return e.next=3,this.getSearchResultByFilter();case 3:e.next=6;break;case 5:console.log("Search input has less than 2 characters");case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;return u()(o.a.mark((function t(){var n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e.getBranches.length){t.next=3;break}return t.next=3,e.GET_BRANCHES();case 3:return t.next=5,e.getBranches.filter((function(t){return t.id==e.id}));case 5:return n=t.sent,e.branch_name=n[0],t.next=9,e.refresh();case 9:case"end":return t.stop()}}),t)})))()},computed:p(p({},Object(f["c"])(["getBranches","getUser","getMedicinesByBranch"])),{},{pagesNumber:function(){return Math.ceil(this.data.length/this.pagination.rowsPerPage)}}),methods:p(p({},Object(f["b"])(["GET_BRANCHES","GET_MEDICINES_BY_BRANCH","GET_SEARCH_RESULT_BY_BRANCH","GET_NEXT_PAGE_FOR_BRANCH_MEDICINES"])),{},{refresh:function(){var e=this;return u()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.rColor="blue",e.loading=!0,t.next=4,e.GET_MEDICINES_BY_BRANCH({virtual_number:e.id});case 4:return t.next=6,e.getMedicinesByBranch.count;case 6:return e.rowsNumber=t.sent,t.next=9,e.getMedicinesByBranch.results;case 9:e.data=t.sent,e.pagination.page=1,e.loading=!1,e.rColor="grey";case 13:case"end":return t.stop()}}),t)})))()},getSearchResultByFilter:function(){var e=this;return u()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.GET_SEARCH_RESULT_BY_BRANCH({virtual_number:e.id,title:e.filter});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}})},g=b,h=n("2877"),m=Object(h["a"])(g,r,a,!1,null,"329ae31e",null);t["default"]=m.exports}}]);